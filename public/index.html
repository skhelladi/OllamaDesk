<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>i-@ssistant</title>
    <link rel="stylesheet" href="format.css">
    <!-- Remove Prism.js CSS and JS -->
    <!-- 
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    -->

    <!-- Add Highlight.js CSS and JS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css"
        rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/latex.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>

    <!-- Add marked.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            hljs.highlightAll();
        });
    </script>

    <!-- Copy icon SVG -->
    <svg style="display: none;">
        <symbol id="copy-icon" viewBox="0 0 24 24">
            <path
                d="M16 1H4C3 1 2 2 2 3v14h2V3h12V1zm3 4H8C7 5 6 6 6 7v14c0 1 1 2 2 2h11c1 0 2-1 2-2V7c0-1-1-2-2-2zm0 16H8V7h11v14z" />
        </symbol>
        <symbol id="stop-icon" viewBox="0 0 24 24">
            <path d="M6 6h12v12H6z" />
        </symbol>
        <symbol id="retry-icon" viewBox="0 0 24 24">
            <path
                d="M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" />
        </symbol>
        <symbol id="send-icon" viewBox="0 0 24 24">
            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
        </symbol>
        <symbol id="edit-icon" viewBox="0 0 24 24">
            <path
                d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" />
        </symbol>
        <symbol id="save-icon" viewBox="0 0 24 24">
            <path
                d="M17 3H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3-1.34 3-3 3zm3-10H8V5h7v4z" />
        </symbol>
        <symbol id="about-icon" viewBox="0 0 24 24">
            <path
                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm1.07-7.75l-.9.92C12.45 12.9 12 13.5 12 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.27c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z" />
        </symbol>
        <symbol id="settings-icon" viewBox="0 0 24 24">
            <path d="M19.14,12.94a7.07,7.07,0,0,0,.05-1,.78.78,0,0,0-.05-.88l2.11-1.65a.5.5,0,0,0,.12-.66l-2-3.46a.5.5,0,0,0-.61-.18l-2.49,1a7.12,7.12,0,0,0-1.68-.98l-.38-2.65A.5.5,0,0,0,14.5,3H9.5a.5.5,0,0,0-.5.43L8.62,6.08a7.12,7.12,0,0,0-1.68.98l-2.49-1a.5.5,0,0,0-.61.18l-2,3.46a.5.5,0,0,0,.12.66l2.11,1.65a7.07,7.07,0,0,0-.05,1,7.07,7.07,0,0,0,.05,1L2.44,14.59a.5.5,0,0,0-.12.66l2,3.46a.5.5,0,0,0,.61.18l2.49-1a7.12,7.12,0,0,0,1.68.98l.38,2.65a.5.5,0,0,0,.5.43h5a.5.5,0,0,0,.5-.43l.38-2.65a7.12,7.12,0,0,0,1.68-.98l2.49,1a.5.5,0,0,0,.61-.18l2-3.46a.5.5,0,0,0-.12-.66ZM12,15.5A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/>
        </symbol>
    </svg>
</head>

<body>
    <div class="container">
        <div class="header-container">
            <div class="header-left">
                <h1>i-@ssistant</h1>
            </div>
            <div class="header-right">
                <div class="model-selector">
                    <label for="model-select">Model:</label>
                    <select id="model-select"></select>
                </div>
                <!-- About Button -->
                <button type="button" class="action-button about" id="about-button" title="About">
                    <svg>
                        <use href="#about-icon" />
                    </svg>
                </button>
                <!-- Add Settings Button -->
                <button type="button" class="action-button settings" id="settings-button" title="Settings">
                    <svg>
                        <use href="#settings-icon" />
                    </svg>
                </button>
            </div>
        </div>
        <div class="chat-container" id="reponse"></div>
        <div class="input-container">
            <form class="input-group">
                <input type="text" id="chat" placeholder="Your message...">
            </form>
            <div class="input-actions">
                <button type="submit" class="action-button send" id="send-button" title="Send">
                    <svg>
                        <use href="#send-icon" />
                    </svg>
                </button>
                <button type="button" class="action-button stop" id="stop-button" title="Stop" disabled>
                    <svg>
                        <use href="#stop-icon" />
                    </svg>
                </button>
                <button type="button" class="action-button retry" id="retry-button" title="Retry" disabled>
                    <svg>
                        <use href="#retry-icon" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Add About Modal HTML -->
    <div class="stacked-widget-container" id="about-modal">
        <div class="retry-page">
            <h2>About This Application</h2>
            <p>This application serves as an AI assistant, allowing users to interact with various models to obtain
                solutions to their queries.
                This code is a graphical interface for <a href="https://ollama.com/" target="_blank">Ollama</a> using
                free LLMs.
                The backend server is responsible for model management and processing.</p>

            <p class="footer-text"><strong>Author:</strong> Sofiane KHELLADI &lt;sofiane@khelladi.page&gt;</p>
            <p class="footer-text"><strong>License:</strong> GPL</p>
            <br />
            <br />
            <p class="footer-text">&copy; 2024 Sofiane KHELLADI. All rights reserved.</p>
            <button type="button" class="pagination-button" id="close-about">Close</button>
        </div>
    </div>

    <!-- Add Settings Modal HTML -->
    <div class="stacked-widget-container" id="settings-modal">
        <div class="retry-page" style="max-width: 600px; font-size: 1.2rem;">
            <h2>Settings</h2>
            <form id="settings-form">
                <div class="form-group">
                    <label for="stream">Stream:</label>
                    <select id="stream" name="stream">
                        <option value="true">True</option>
                        <option value="false">False</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="temperature">Temperature:</label>
                    <input type="number" id="temperature" name="temperature" min="0" max="1" step="0.1" value="0.7">
                </div>

                <!-- Change label from "System Content" to "Context" -->
                <div class="form-group">
                    <label for="systemContent">Context:</label>
                    <textarea id="systemContent" name="systemContent" rows="4">You are a helpful AI assistant, always respond in the same language as the user. Always add a title to your messages if the question is about a specific topic. Write all the equations in LaTeX format.</textarea>
                </div>

                <!-- Wrap buttons in a container for inline alignment -->
                <div class="button-group" style="justify-content: center;">
                    <button type="submit" class="pagination-button">Save</button>
                    <button type="button" class="pagination-button" id="close-settings">Cancel</button>
                    <button type="button" class="pagination-button" id="reset-settings">Reset to Default</button>
                </div>
            </form>
        </div>
    </div>

    <script src="./index.js"></script>
</body>

</html>